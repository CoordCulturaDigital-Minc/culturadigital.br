<?php
/* Alternate Styles & Layouts Functions */
global $arras_registered_alt_layouts;

function register_alternate_layout($id, $name) {
	global $arras_registered_alt_layouts;
	$arras_registered_alt_layouts[$id] = $name;
}

function is_valid_arras_style($file) {
	return (bool)( !preg_match('/^\.+$/', $file) && preg_match('/^[A-Za-z][A-Za-z0-9\-]*.css$/', $file) );
}

function arras_override_styles() {
?>

<!-- Generated by Arras Theme -->
<style type="text/css">
<?php do_action('arras_custom_styles'); ?>
</style>
<?php
}

function arras_add_custom_logo() {
	$arras_logo_id = arras_get_option('logo');
	if ($arras_logo_id != 0) {
		$arras_logo = wp_get_attachment_image_src($arras_logo_id, 'full');

		echo '.blog-name a { background: url(' . $arras_logo[0] . ') no-repeat; text-indent: -9000px; width: ' . $arras_logo[1] . 'px; height: ' . $arras_logo[2] . 'px; display: block; }' . "\n";
	}
}

function arras_layout_styles() {

$featured_thumb_w = arras_get_option('featured_thumb_w');
$featured_thumb_h = arras_get_option('featured_thumb_h');
?>
#index-featured .posts-default .post { width: <?php echo $featured_thumb_w + 10 ?>px; }
#index-featured .posts-default img, #index-featured .posts-default .entry-thumbnails-link { width: <?php echo $featured_thumb_w ?>px; height: <?php echo $featured_thumb_h ?>px; }
#index-featured .posts-default .entry-thumbnails { width: <?php echo $featured_thumb_w +10 ?>px; height: <?php echo $featured_thumb_h + 10 ?>px; }
#index-featured .posts-quick .entry-thumbnails { width: <?php echo $featured_thumb_w ?>px; height: <?php echo $featured_thumb_h ?>px; }
#index-featured .posts-default .entry-meta, #index-featured .posts-quick .entry-meta { width: <?php echo $featured_thumb_w ?>px; }
<?php
$news_thumb_w = arras_get_option('news_thumb_w');
$news_thumb_h = arras_get_option('news_thumb_h');
?>
#index-news .posts-default .post { width: <?php echo $news_thumb_w + 10 ?>px; }
#index-news .posts-default img, #index-news .posts-default .entry-thumbnails-link { width: <?php echo $news_thumb_w ?>px; height: <?php echo $news_thumb_h ?>px; }
#index-news .posts-default .entry-thumbnails { width: <?php echo $news_thumb_w +10 ?>px; height: <?php echo $news_thumb_h + 10 ?>px; }
#index-news .posts-quick .entry-thumbnails img { width: <?php echo $news_thumb_w ?>px; height: <?php echo $news_thumb_h ?>px; }
#index-news .posts-default .entry-meta, #index-news .posts-quick .entry-meta { width: <?php echo $news_thumb_w ?>px; }

#archive-posts .posts-default .post { width: <?php echo $news_thumb_w + 10 ?>px; }
#archive-posts .posts-default img, #archive-posts .posts-default .entry-thumbnails-link { width: <?php echo $news_thumb_w ?>px; height: <?php echo $news_thumb_h ?>px; }
#archive-posts .posts-default .entry-thumbnails { width: <?php echo $news_thumb_w +10 ?>px; height: <?php echo $news_thumb_h + 10 ?>px; }
#archive-posts .posts-quick .entry-thumbnails img { width: <?php echo $news_thumb_w ?>px; height: <?php echo $news_thumb_h ?>px; }
#archive-posts .posts-default .entry-meta, #archive-posts .posts-quick .entry-meta { width: <?php echo $news_thumb_w ?>px; }
<?php $layout = arras_get_option('layout') ?>

<?php if (strpos($layout, '1c') !== false) : ?>
.featured, .featured-article { height: 300px; }
.featured-article { width: 950px; }
.featured-article img { width: 950px; height: 300px; }
#controls { width: 920px; top: 120px; }
#controls .next { left: 915px; }
.featured-entry	{ height: 100px; top: -100px; }
<?php elseif (strpos($layout, '3c') !== false) : ?>
.featured, .featured-article { height: 225px; }
.featured-article { width: 490px; }
.featured-article img { width: 490px; height: 225px; }
#controls { width: 450px; top: 85px; }
#controls .next { left: 455px; }
.featured-entry	{ height: 80px; top: -80px; }
<?php endif;
}

function arras_add_blueprint_css() {
	echo '
	<link rel="stylesheet" href="' . get_bloginfo('template_url') . '/css/blueprint/screen.css" type="text/css" media="screen,projection" />
	<link rel="stylesheet" href="' . get_bloginfo('template_url') . '/css/blueprint/print.css" type="text/css" media="print" />
	<!--[if IE 6]>
	<link rel="stylesheet" href="' . get_bloginfo('template_url') . '/css/blueprint/ie.css" type="text/css" media="screen,projection" />
	<![endif]-->
	';
}

function arras_add_layout_css() {
	global $arras_registered_alt_layouts;
?>
<?php if ( count($arras_registered_alt_layouts) > 0 ) : ?>
<link rel="stylesheet" href="<?php bloginfo('template_url') ?>/css/layouts/<?php echo arras_get_option('layout') ?>.css" type="text/css" />
<?php endif;
}

function arras_add_style_css() {
	global $theme_data, $arras_registered_alt_styles;


	$scheme = arras_get_option('style');
	if ( $scheme != 'default' )
		echo '<link rel="stylesheet" href="' . get_bloginfo('template_url') . '/css/styles/' . $scheme . '.css" type="text/css" media="screen,projection" />';
	else
		echo '<link rel="stylesheet" href="' . get_bloginfo('template_url') . '/css/styles/default.css" type="text/css" media="screen,projection" />';
		
	if ( $scheme == 'default' || $scheme == 'legacy' ) { ?>
	<!--[if IE 6]>
	<link rel="stylesheet" href="<?php bloginfo('template_url'); ?>/css/ie6.css" type="text/css" />
	<![endif]-->
	<?php }
}

function arras_add_user_css() {
	if (!ARRAS_CHILD) {
		echo '<link rel="stylesheet" href="' . get_bloginfo('template_url') . '/user.css" type="text/css" media="screen,projection" />';
	} else {
		echo '<link rel="stylesheet" href="' . get_bloginfo('stylesheet_url') . '" type="text/css" media="screen,projection" />';
	}
}

/* End of file styles.php */
/* Location: ./library/styles.php */
